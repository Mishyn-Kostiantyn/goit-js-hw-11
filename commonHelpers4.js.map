{"version":3,"file":"commonHelpers4.js","sources":["../src/js/search-images.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst ref = {\n    formForInputSearchingParametersForImages: document.querySelector('.input-form'),\n    containerForLoaderSign: document.querySelector('.loader-container'),\n    formForImagesGallery: document.querySelector('.gallery')\n};\nref.formForInputSearchingParametersForImages.addEventListener('submit', onFormSubmit);\nfunction showWarningMessage() {\n    iziToast.warning({\n        color: 'red',\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topCenter',\n    });\n};\nfunction showWarningMessageForEmptyInput() {\n    iziToast.warning({\n        color: 'red',\n    message: 'YOU ALREADY GOT EMPTY IMAGE. IF YOU WANT SOMETHING ELSE - TYPE SOME WORD/WORDS, PLEASE!',\n    position: 'topCenter',\n    });\n};\nfunction showErrorMessage(error) {\n  iziToast.error({\n      timeout: 3000,\n      message: `An error: ${error} occurred while processing your request `,\n      position: 'topCenter',\n    });\n}\nfunction deleteImageGalleryMarkup() {\n    ref.formForImagesGallery.innerHTML = '';\n};\nfunction getImageGallery(whatAreWeSearching) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '?key=42121047-6dc093e186e55c34fb150394f';\n    const SEARCHING_THEME = `&q=${whatAreWeSearching}`;\n    const IMAGE_TYPE = '&image-type=photo';\n    const ORIENTATION = '&orientation=horizontal';\n    const SAFE_SEARCH = '&safesearch=true';\n    const url = BASE_URL + API_KEY + SEARCHING_THEME + IMAGE_TYPE + ORIENTATION + SAFE_SEARCH;\n  return fetch(url).then(Response => {\n    if (!Response.ok) { throw new Error(Response.statusText); }\n    return Response.json();\n  });\n};\n\nfunction createImageCardMarkup(images) {\n  return images.map(({ webformatURL, largeImageURL, tags,likes, views, comments,downloads }) => {\n    return `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n          />\n          </a>\n        <ul class=\"image-activity\">\n          <li class=\"image-activity-item\">\n            <h4 class=\"image-activity-type\">Likes</h4>\n            <p>${likes}</p>\n          </li>\n          <li class=\"image-activity-item\">\n            <h4 class=\"image-activity-type\">Views</h4>\n            <p>${views}</p>\n          </li>\n          <li class=\"image-activity-item\">\n            <h4 class=\"image-activity-type\">Comments</h4>\n            <p>${comments}</p>\n            <li class=\"image-activity-item\">\n            <h4 class=\"image-activity-type\">Downloads</h4>\n            <p>${downloads}</p>\n          </li>\n          </li>\n        </ul>\n      </li>`\n  }).join('');\n};\nfunction renderImageGallery(images) {\n    const markup = createImageCardMarkup(images);\n    ref.formForImagesGallery.innerHTML = markup;\n    lightbox.refresh();\n}\n\nfunction onFormSubmit(event) {\n    event.preventDefault();\n  deleteImageGalleryMarkup();\n  ref.containerForLoaderSign.classList.remove('hide');\n    let searchingTheme = event.target.elements.query.value;\n  if (searchingTheme.trim() !== '') {\n    getImageGallery(searchingTheme).then(data => {\n      if (data.hits == 0) {\n        ref.containerForLoaderSign.classList.add('hide');\n        showWarningMessage();\n      }\n      else {\n        ref.containerForLoaderSign.classList.add('hide');\n        renderImageGallery(data.hits);\n      }\n    }).catch(error => { showErrorMessage(error); })\n    \n    ref.formForInputSearchingParametersForImages.reset()\n  } else {\n    ref.containerForLoaderSign.classList.add('hide');\n    showWarningMessageForEmptyInput();\n  }\n};\n\n\nlet lightbox = new SimpleLightbox('.gallery a',\n    {\n    captionsData: 'alt', captionDelay: 250,\n    }\n);"],"names":["ref","onFormSubmit","showWarningMessage","iziToast","showWarningMessageForEmptyInput","showErrorMessage","error","deleteImageGalleryMarkup","getImageGallery","whatAreWeSearching","BASE_URL","API_KEY","SEARCHING_THEME","IMAGE_TYPE","ORIENTATION","SAFE_SEARCH","url","Response","createImageCardMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderImageGallery","markup","lightbox","event","searchingTheme","data","SimpleLightbox"],"mappings":"2GAIA,MAAMA,EAAM,CACR,yCAA0C,SAAS,cAAc,aAAa,EAC9E,uBAAwB,SAAS,cAAc,mBAAmB,EAClE,qBAAsB,SAAS,cAAc,UAAU,CAC3D,EACAA,EAAI,yCAAyC,iBAAiB,SAAUC,CAAY,EACpF,SAASC,GAAqB,CAC1BC,EAAS,QAAQ,CACb,MAAO,MACX,QAAS,2EACT,SAAU,WACd,CAAK,CACL,CACA,SAASC,GAAkC,CACvCD,EAAS,QAAQ,CACb,MAAO,MACX,QAAS,0FACT,SAAU,WACd,CAAK,CACL,CACA,SAASE,EAAiBC,EAAO,CAC/BH,EAAS,MAAM,CACX,QAAS,IACT,QAAS,aAAaG,CAAK,2CAC3B,SAAU,WAChB,CAAK,CACL,CACA,SAASC,GAA2B,CAChCP,EAAI,qBAAqB,UAAY,EACzC,CACA,SAASQ,EAAgBC,EAAoB,CACzC,MAAMC,EAAW,2BACXC,EAAU,0CACVC,EAAkB,MAAMH,CAAkB,GAC1CI,EAAa,oBACbC,EAAc,0BACdC,EAAc,mBACdC,EAAMN,EAAWC,EAAUC,EAAkBC,EAAaC,EAAcC,EAChF,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAY,CACjC,GAAI,CAACA,EAAS,GAAM,MAAM,IAAI,MAAMA,EAAS,UAAU,EACvD,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASC,EAAsBC,EAAQ,CACrC,OAAOA,EAAO,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAK,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAS,UAAAC,CAAS,IAC9E;AAAA;AAAA,wCAE6BL,CAAa;AAAA;AAAA;AAAA,mBAGlCD,CAAY;AAAA,mBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAMNC,CAAK;AAAA;AAAA;AAAA;AAAA,iBAILC,CAAK;AAAA;AAAA;AAAA;AAAA,iBAILC,CAAQ;AAAA;AAAA;AAAA,iBAGRC,CAAS;AAAA;AAAA;AAAA;AAAA,YAKvB,EAAE,KAAK,EAAE,CACZ,CACA,SAASC,EAAmBR,EAAQ,CAChC,MAAMS,EAASV,EAAsBC,CAAM,EAC3CnB,EAAI,qBAAqB,UAAY4B,EACrCC,EAAS,QAAO,CACpB,CAEA,SAAS5B,EAAa6B,EAAO,CACzBA,EAAM,eAAc,EACtBvB,IACAP,EAAI,uBAAuB,UAAU,OAAO,MAAM,EAChD,IAAI+B,EAAiBD,EAAM,OAAO,SAAS,MAAM,MAC/CC,EAAe,KAAM,IAAK,IAC5BvB,EAAgBuB,CAAc,EAAE,KAAKC,GAAQ,CACvCA,EAAK,MAAQ,GACfhC,EAAI,uBAAuB,UAAU,IAAI,MAAM,EAC/CE,MAGAF,EAAI,uBAAuB,UAAU,IAAI,MAAM,EAC/C2B,EAAmBK,EAAK,IAAI,EAEpC,CAAK,EAAE,MAAM1B,GAAS,CAAED,EAAiBC,CAAK,EAAI,EAE9CN,EAAI,yCAAyC,MAAO,IAEpDA,EAAI,uBAAuB,UAAU,IAAI,MAAM,EAC/CI,IAEJ,CAGA,IAAIyB,EAAW,IAAII,EAAe,aAC9B,CACA,aAAc,MAAO,aAAc,GAClC,CACL"}